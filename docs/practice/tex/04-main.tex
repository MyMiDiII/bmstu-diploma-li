\chapter{Основная часть}

\section{Формальная постановка задачи}

Для построения поискового индекса в реляционной базе данных на основе нейронной
сети требуется:

\begin{itemize}
    \item исходный набор ключей в качестве входных данных;
    \item набор указателей на данные, соответсвующие ключам;
    \item правила их предварительной обработки, требующейся для обучения модели;
    \item модель нейронной сети в качестве основы будущего индекса;
    \item алгоритм обучения нейронной сети, результатом работы которого является
        обученная модуль, представляющая собой индекс.
\end{itemize}

Формально данная задача может быть описана с помощью IDEF0-диаграммы нулевого
уровня, представленной на рисунке~\ref{img:idef0-A0}.

\imgs{idef0-A0}{h!}{1}{Постановка задачи}

\section{Ограничения на входные и выходные данные}

На входные данные метода накладваются следующие ограничения:

\begin{itemize}
    \item в качестве ключей на вход принимаются целые числа для исключения
        решения дополнительной задачи преобразования входных данных;
    \item ключи во входном наборе уникальны.
\end{itemize}

Результатом работы метода является структура данных, представляющая собой индекс
над таблицей реляционной базы данных, построенные на основе глубокой нейронной
сети. То есть выходным данным является структура, имеющая следующие поля:

\begin{itemize}
    \item отсортированный массив ключей, поданных на вход;
    \item отсортированный по значениям ключей массив указателей
        на данные, соответствующие ключам;
    \item модель обученной глубокой нейронной сети, с помощью которой будет
        предсказываться положение ключа в отсортированном массиве;
    \item средняя и максимальная абсолютные ошибки предсказания позиции ключа,
        для ее уточнения и возврата верного указателя на данные.
\end{itemize}

Краткое описания индекса, являющегося результатом работы метода, как структуры
данных представлено на рисунке~\ref{img:index-struct}.

\imgs{index-struct}{h!}{1}{Индекс как структура данных}

Так как индекс строится над таблицей реляционной базы данных накладываются
ограничения на виды поддерживаемых SQL-запросов. Разрабатываемое программное
обеспечение должно предоставлять возможность работы с запросами фильтрации,
представленными оператором \texttt{WHERE} следующими с условием:

\begin{itemize}
    \item \texttt{column operator value},

        где \texttt{column} --- имя проиндексированного столбца,

        \texttt{operator} --- одна из операций сравнения: \texttt{=, <, >, <=, >=},

        \texttt{value} --- некоторое целочисленное значение.

    \item \texttt{column BETWEEN value1 AND value2},
        
        где \texttt{column} --- имя проиндексированного столбца,

        \texttt{value1, value2} --- целочисленные значения, представляющие
        нижнюю и верхнюю границы диапазона.
\end{itemize}

\section{Основные этапы метода}

Основные этапы метода построения индекса приведены на IDEF0-диаграмме первого
уровня~(рисунок~\ref{img:idef0-A1}). 

\imgw{idef0-A1}{h!}{17cm}{IDEF0-диаграмма метода построения индекса в
реляционной базе данных на основе глубоких нейронных сетей}

Для проверки работоспособности метода также разработка основной операции,
осущствляемой с помощью индекса --- поиска, IDEF0-диаграмма алгоритма которого
представлена на рисунках~\ref{img:search-A0}-\ref{img:search-A1}.

\imgs{search-A0}{h!}{1}{IDEF0-диаграмма нулевого уровня поиска}
\imgw{search-A1}{h!}{17cm}{IDEF0-диаграмма первого уровня поиска}

\section{Структура программного обеспечения}

\section{Выбор средств программной реализации}

Для реализации метода построения индекса в реляционной базе данных на основе
глубоких нейроных сетей в качестве языка программирования выбран
Python~3.10~\cite{python}.  В качестве библиотеки глубокого обучения выбран
TensorFlow~2.11.0~\cite{tf} и работающий поверх нее высокоуровневый программный
интерфейс Keras~2.11.0~\cite{keras}.  Для работы с массивами данных выбрана
библиотека numpy~\cite{numpy}.

В качестве реляционной системы управления базами данных выбрана
SQLite~\cite{sqlite}, предоставляющая программный интерфейс виртуальных таблиц,
позволяющих релизовать пользовательский поисковый индекс. Виртуальные таблицы
являются одним из видов расширений SQLite, программный интерфейс которых
предоставляется на языке C~\cite{c}, который и выбран в качестве языка
программирования для взаимодействия с реляционной базой данных.

Для обеспечения взаимодействия между компонентом работы с базой данных и
компонентом, непосредственно реализующий индекс, используются библиотеки языка C
\texttt{Python.h} для работы с объектами языка Python и
\texttt{numpy/arrayobject.h}, предоставляющая программный интерфейс для работы с
numpy-массивами, которые являются основным типом данных, через который
происходит взаимодействие модулей.

\section{Ключевые моменты реализации}

\section{Взаимодействие с программным обеспечением}
