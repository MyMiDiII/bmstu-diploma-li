\chapter{Анализ предметной области\label{analysis}}

\section{Основные определения}

Индекс --- это некоторая структура, обеспечивающая быстрый поиск
записей в базе данных~\cite{amur}. Индекс определяет соответствие значения
атрибута или набора атрибутов --- ключа поиска --- конкретной
записи с местоположением этой записи~\cite{ship}. Это соответствие организуется
с помощью индексных записей. Каждая из них соответствует записи в
индексируемой таблице --- таблице, по которой строится индекс --- и
содержит два поля: идентификатор записи или указатель на нее, а также значение
индексированного поля в этой записи~\cite{syore}.

Индексы могут использоваться для поиска по конкретному значению или диапазону
значений, а также для проверки существования элемента в таблице, однако
обеспечение уменьшения времени доступа к записям в общем случае достигается за
счет~\cite{ship}:
\begin{itemize}
    \item упорядочивания индексных записей по ключу поиска, что уменьшает
        количество записей, которые необходимо просмотреть;
    \item а также меньшего размера индекса по сравнению с индексируемой
        таблицей, сокращающего время чтения одного элемента.
\end{itemize}

В то же время индекс является структурой, которая строится в дополнение к
существующим данным, то есть он занимает дополнительный объем памяти и должен
соответствовать текущим данным.  Последнее значит, что индекс необходимо
изменять при вставке или удалении элементов, на что затрачивается время, поэтому
индекс, ускоряя работу СУБД при доступе к данным, замедляет операции изменения
таблицы, что необходимо учитывать\cite{osip}.

Таким образом, индекс может описываться~\cite{ship}:
\begin{itemize}
    \item типом доступа --- поиск записей по атрибуту с конкретным
        значением, или со значением из указанного диапазона;
    \item временем доступа --- время поиска записи или записей;
    \item временем вставки, включающее время поиска правильного места
        вставки, а также время для обновления индекса;
    \item временем удаления, аналогично вставке, включающее время на поиск
        удаляемого элемента и время для обновления индекса;
    \item дополнительной памятью, занимаемой индексной структурой.
\end{itemize}

\section{Типы индексов}

Индексы могут быть~\cite{ship}:
\begin{itemize}
    \item кластеризованные и некластеризованные;
    \item плотные и разреженные;
    \item одноуровневые и многоуровневые;
    \item а также иметь в своей основе различные структуры, что описывается в
        следующем разделе, так как исследуется в данной работе.
\end{itemize}

В кластеризованных индексах логический порядок ключей определяет
физическое расположение записей, а так как строки в таблице могут быть
упорядочены только в одном порядке, то кластеризованный индекс может быть
только один на таблицу. Логический порядок {некластеризованных} индексов
не влияет на физический, и индекс содержит указатели на записи
таблицы~\cite{osip}.

Плотные индексы~(рисунок~\ref{img:dense}) содержат ключ поиска и
указатель на первую запись с заданным ключом поиска. При этом в кластеризованных
индексах другие записи с заданным ключом будут лежать сразу после первой записи,
так как записи в таких файлах отсортированы по тому же ключу. Плотные
некластеризованные индексы должны содержать список указателей на каждую запись с
заданным ключом поиска~\cite{ship}.
 
\imgs{dense}{h!}{1}{Плотный индекс}

В разреженных индексах~(рисунок~\ref{img:sparse}) записи содержат
только некоторые значения ключа поиска, а для доступа к элементу отношения
ищется запись индекса с наибольшим меньшим или равным значением ключа поиска,
происходит переход по указателю на первую запись по найденному ключу и далее по
указателям в файле происходит поиск заданной записи. Таким образом, разреженные
индексы могут быть построены только на отсортированных последовательностях
записей, иначе хранения только некоторых ключей поиска будет недостаточно, так
как будет неизвестно, после записи, с каким ключом будет лежать необходимый
элемент отношения~\cite{ship}.

\imgs{sparse}{h!}{1}{Разреженный индекс}

Поиск с помощью плотных индексов быстрее, так как указатель в записи индекса
сразу приводит к необходимым записям. Однако разреженные индексы требуют меньше
дополнительной памяти и сокращают время поддержания структуры индекса в
актуальном состоянии при вставке или удалении~\cite{ship}.

Одноуровневые индексы ссылаются на данные в таблице, индексы же верхнего уровня
многоуровневой структуры ссылаются на индексы нижестоящего
уровня~\cite{ship}~(рисунок~\ref{img:multilevel}).

\imgs{multilevel}{h!}{1}{Многоуровневый индекс}

